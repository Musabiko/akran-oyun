<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Akran Zorbalığı Oyun</title>
<style>
body { font-family: Arial; text-align:center; padding:20px; background:#f0f8ff; }
button { padding:10px 20px; margin:5px; cursor:pointer; }
textarea { width:80%; margin-bottom:10px; }
</style>
</head>
<body>

<h1>10 Kelimelik Akran Zorbalığıyla Alakalı bir Cümle Yazınız</h1>
<p>Puanınız: <span id="puan">0</span></p>
<textarea id="gorev1-text" rows="3" placeholder="Buraya yazınız..."></textarea><br>
<button onclick="gorevTamamla('gorev1',1)">Görevi Tamamla</button>

<script>
let puan = 0;
let gorevTamamlandi = {};

// 10 kelimelik 1000 kabul edilebilir cümle
const dogruCevaplar = [];
for(let i=1;i<=1000;i++){
    dogruCevaplar.push(`Bu örnek cümle akran zorbalığı hakkında on kelime içerir ${i}`);
}

// Benzerlik kontrolü (%60 kelime eşleşmesi)
function benzerMi(girilen, dogru) {
  girilen = girilen.toLowerCase().trim();
  dogru = dogru.toLowerCase().trim();
  const kelimelerGirilen = girilen.split(/\s+/);
  const kelimelerDogru = dogru.split(/\s+/);
  let sayac = 0;
  kelimelerGirilen.forEach(kelime => {
    if (kelimelerDogru.includes(kelime)) sayac++;
  });
  const oran = sayac / kelimelerDogru.length;
  return oran >= 0.6;
}

function gorevTamamla(gorevId, gorevPuan) {
  if (gorevTamamlandi[gorevId]) {
    alert("Bu görevi zaten tamamladınız!");
    return;
  }
  const textElement = document.getElementById(gorevId + "-text");
  const text = textElement.value.trim();
  
  if (text === "") {
    alert("Lütfen bir şey yazın!");
    return;
  }

  // Minimum kelime sayısı kontrolü
  const kelimeler = text.split(/\s+/);
  if (kelimeler.length < 10) {
    alert("Cümle çok kısa! Lütfen en az 10 kelime yazın.");
    return;
  }

  // 1000 kabul edilebilir cümle içinde kontrol
  const kabul = dogruCevaplar.some(dc => benzerMi(text, dc));
  if(!kabul){
    alert("Cümle uygun değil veya yeterince benzer değil!");
    return;
  }

  // Copy-paste / tekrar kontrolü
  const uniqueKelimeler = [...new Set(kelimeler)];
  const oran = kelimeler.length > 0 ? uniqueKelimeler.length / kelimeler.length : 1;
  if(oran < 0.6){
    alert("Cümle çok benzer kelimeler içeriyor. Lütfen özgün yazın!");
    return;
  }

  puan += gorevPuan;
  document.getElementById('puan').innerText = puan;
  alert("Tebrikler! Görev tamamlandı ve " + gorevPuan + " puan kazandınız.");
  gorevTamamlandi[gorevId] = true;
  textElement.value = "";
}
</script>

</body>
</html>
